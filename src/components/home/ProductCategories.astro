---
import { getImage } from "astro:assets";
import windowSystemsImage from "../../assets/product-categories-section/window-systems1.png";
import woodenDoorsImage from "../../assets/hero-carousel/4.png"; // TODO: Replace with actual wooden doors image
import framesImage from "../../assets/hero-carousel/2_1.png"; // TODO: Replace with actual frames image
import architecturalImage from "../../assets/hero-carousel/3.png"; // TODO: Replace with actual architectural products image

// Helper functions to minimize repetition
const categoryTitleClasses =
  "font-[AcidGrotesk] font-light text-2xl sm:text-3xl md:text-3xl lg:text-4xl xl:text-5xl transition-colors";
const categorySubtitleClasses =
  "text-[#391B26] font-[Altone] font-normal leading-snug text-sm md:text-base lg:text-lg xl:text-xl";

// Prepare image URLs for the client-side script with proper base path handling
const windowImg = await getImage({ src: windowSystemsImage });
const doorsImg = await getImage({ src: woodenDoorsImage });
const framesImg = await getImage({ src: framesImage });
const archImg = await getImage({ src: architecturalImage });

const imageUrls = [windowImg.src, doorsImg.src, framesImg.src, archImg.src];
---

<section>
  <div class="flex flex-col md:flex-row gap-11 md:gap-0 px-4 md:px-8 py-14">
    <div class="basis-2/3 flex flex-col justify-between">
      <div class="hidden md:block md:opacity-0 lg:opacity-100">
        <h5 class={categorySubtitleClasses}>WITH 40 YEARS OF CRAFTSMANSHIP</h5>
        <h5 class={categorySubtitleClasses}>AND EXPERTISE IN WOODWORK.</h5>
      </div>
      <div class="flex flex-col gap-3 sm:gap-4 md:gap-5 lg:gap-7 xl:gap-10">
        <h2 class={categoryTitleClasses} data-category="0">
          <a href="/kelveneers/windows" class="cursor-pointer no-underline"
            >Window Systems</a
          >
        </h2>
        <h2 class={categoryTitleClasses} data-category="1">
          <a href="/kelveneers/doors" class="cursor-pointer no-underline"
            >Wooden Doors</a
          >
        </h2>
        <h2 class={categoryTitleClasses} data-category="2">
          <a href="/kelveneers/frames" class="cursor-pointer no-underline"
            >Frames</a
          >
        </h2>
        <h2 class={categoryTitleClasses} data-category="3">
          <a
            href="/kelveneers/architectural-add-on-products"
            class="cursor-pointer no-underline"
            ><span class="block">Architectural add-on</span>
            <span class="block">products</span></a
          >
        </h2>
      </div>
    </div>
    <div class="basis-1/3">
      <img
        src={windowSystemsImage.src}
        alt="Product Category"
        class="aspect-[603/755] w-full h-auto"
        id="category-image"
        loading="eager"
      />
    </div>
  </div>
</section>

<script define:vars={{ imageUrls }}>
  const categories = [
    "Window Systems",
    "Wooden Doors",
    "Frames",
    "Architectural add-on products",
  ];

  let selectedIndex = 0;

  const h2s = document.querySelectorAll("h2[data-category]");
  const img = document.getElementById("category-image");

  function updateSelection() {
    h2s.forEach((h2, i) => {
      if (i === selectedIndex) {
        h2.style.color = "#EB7D66";
      } else {
        h2.style.color = "#746d6f";
      }
    });
    img.src = imageUrls[selectedIndex];
  }

  h2s.forEach((h2, index) => {
    h2.addEventListener("mouseover", () => {
      selectedIndex = index;
      updateSelection();
    });
  });

  // Set default selection to first
  updateSelection();
</script>
