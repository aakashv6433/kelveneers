---
import { Image } from "astro:assets";
import ourCatalogueImage from "../../assets/ourcatalogue-homepage.png";
import windowSystemsImage from "../../assets/product-categories-section/window-systems.png";
import woodenDoorsImage from "../../assets/hero-carousel/4.png";
import framesImage from "../../assets/hero-carousel/2.png";
import architecturalImage from "../../assets/hero-carousel/3.png";
import iconImage1 from "../../assets/OurCatalogIcon1.png";
import iconImage2 from "../../assets/OurCatalogIcon2.png";
import iconImage3 from "../../assets/OurCatalogIcon3.png";

// Prepare image URLs for the client-side script
const imageUrls = [
  windowSystemsImage,
  woodenDoorsImage,
  framesImage,
  architecturalImage,
];
---

<section>
  <div class="flex pl-4 md:pl-8 py-0 md:py-16">
    <div class="basis-2/3 relative">
      <Image src={ourCatalogueImage} alt="House" loading={"lazy"} class="w-full h-auto" />
      
      <!-- Interactive icons -->
      <div class="absolute inset-0">
               <!-- First icon positioned on the left -->
               <div 
                 class="absolute w-12 h-12 cursor-pointer hover:scale-110 transition-transform duration-200"
                 style="top: 23%; left: 48%;"
                 data-category="0"
                 title="Window Systems"
               >
                 <Image 
                   src={iconImage1} 
                   alt="Window Systems Icon" 
                   class="w-full h-full"
                   loading="lazy"
                 />
               </div>
               
               <!-- Second icon positioned on the left -->
               <div 
                 class="absolute w-12 h-12 cursor-pointer hover:scale-110 transition-transform duration-200"
                 style="top: 65%; left: 16%;"
                 data-category="1"
                 title="Wooden Doors"
               >
                 <Image 
                   src={iconImage2} 
                   alt="Wooden Doors Icon" 
                   class="w-full h-full"
                   loading="lazy"
                 />
               </div>
               
               <!-- Third icon positioned on the right -->
               <div 
                 class="absolute w-12 h-12 cursor-pointer hover:scale-110 transition-transform duration-200"
                 style="top: 60%; right: 22%;"
                 data-category="2"
                 title="Frames"
               >
                 <Image 
                   src={iconImage3} 
                   alt="Frames Icon" 
                   class="w-full h-full"
                   loading="lazy"
                 />
               </div>
      </div>
    </div>
    <div
      class="basis-1/3 border border-[#E5E2D6] p-3 md:p-6 flex flex-col justify-between"
    >
      <div class="flex-1 flex items-center justify-center">
        <Image
          src={windowSystemsImage}
          alt="Product Category"
          class="w-full h-auto max-w-[300px] opacity-0 transition-opacity duration-300"
          id="catalogue-image"
          loading="lazy"
        />
      </div>
      <h2
        class="font-[AcidGrotesk] font-extralight text-[#391B26] text-lg sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl"
      >
        Our Catalogue
      </h2>
    </div>
  </div>
</section>

<script define:vars={{ imageUrls }}>
  const icons = document.querySelectorAll('[data-category]');
  const img = document.getElementById('catalogue-image');

  function updateImage(categoryIndex) {
    if (img && imageUrls[categoryIndex]) {
      img.src = imageUrls[categoryIndex].src;
      img.style.opacity = '1';
    }
  }

  function hideImage() {
    if (img) {
      img.style.opacity = '0';
    }
  }

  icons.forEach((icon) => {
    icon.addEventListener('mouseenter', () => {
      const categoryIndex = parseInt(icon.dataset.category);
      updateImage(categoryIndex);
    });

    icon.addEventListener('mouseleave', hideImage);
  });
</script>
